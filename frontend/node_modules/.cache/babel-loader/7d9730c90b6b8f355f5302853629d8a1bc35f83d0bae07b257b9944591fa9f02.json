{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{useQuery}from'react-query';import{AcademicCapIcon,UserGroupIcon,CloudIcon,CheckCircleIcon,PlusIcon}from'@heroicons/react/24/outline';import{workshopApi}from'../services/api';import StatusIndicator from'../components/StatusIndicator';import{getEffectiveStatus,sortByStatusPriority}from'../utils/statusUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{data:workshops=[],isLoading}=useQuery('workshops',()=>workshopApi.getWorkshops({limit:10}),{refetchInterval:30000// Refetch every 30 seconds\n});// Calculate statistics\nconst stats=React.useMemo(()=>{const totalWorkshops=workshops.length;const activeWorkshops=workshops.filter(w=>w.status==='active').length;const totalAttendees=workshops.reduce((sum,w)=>sum+w.attendee_count,0);const activeAttendees=workshops.reduce((sum,w)=>sum+w.active_attendees,0);return{totalWorkshops,activeWorkshops,totalAttendees,activeAttendees};},[workshops]);const statCards=[{name:'Total Workshops',value:stats.totalWorkshops,icon:AcademicCapIcon,color:'bg-primary-500'},{name:'Active Workshops',value:stats.activeWorkshops,icon:CloudIcon,color:'bg-success-500'},{name:'Total Attendees',value:stats.totalAttendees,icon:UserGroupIcon,color:'bg-warning-500'},{name:'Active Attendees',value:stats.activeAttendees,icon:CheckCircleIcon,color:'bg-danger-500'}];if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 dark:text-gray-300\",children:\"Workshop environment overview and statistics\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:[...Array(4)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-8 bg-gray-200 dark:bg-gray-600 rounded w-1/2\"})]})})},i))})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fade-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 dark:text-gray-300\",children:\"Workshop environment overview and statistics\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/workshops/new\",className:\"btn-primary\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"New Workshop\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-12\",children:statCards.map(item=>/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:`p-3 rounded-md ${item.color}`,children:/*#__PURE__*/_jsx(item.icon,{className:\"h-6 w-6 text-white\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-5 w-0 flex-1\",children:/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{className:\"text-sm font-medium text-gray-500 dark:text-gray-300 truncate\",children:item.name}),/*#__PURE__*/_jsx(\"dd\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:item.value})]})})]})})},item.name))}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100\",children:\"Recent Workshops\"}),/*#__PURE__*/_jsx(Link,{to:\"/workshops\",className:\"text-sm text-primary-600 hover:text-primary-500\",children:\"View all\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:workshops.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(AcademicCapIcon,{className:\"mx-auto h-12 w-12 text-gray-400 dark:text-gray-300\",\"data-testid\":\"empty-state-icon\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100\",children:\"No workshops\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-300\",children:\"Get started by creating a new workshop.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(Link,{to:\"/workshops/new\",className:\"btn-primary\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"New Workshop\"]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 dark:divide-gray-600\",children:sortByStatusPriority(workshops.slice(0,5)).map(workshop=>{const effectiveStatus=getEffectiveStatus(workshop);return/*#__PURE__*/_jsx(\"li\",{className:\"py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(StatusIndicator,{status:effectiveStatus,variant:\"icon\",size:\"md\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Link,{to:`/workshops/${workshop.id}`,className:\"text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-primary-600\",children:workshop.name}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-2\",children:/*#__PURE__*/_jsx(StatusIndicator,{status:effectiveStatus,variant:\"badge\",size:\"sm\",showIcon:false})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[workshop.attendee_count,\" attendees \\u2022 \",workshop.active_attendees,\" active\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:new Date(workshop.start_date).toLocaleDateString()})]})},workshop.id);})})})})]})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}