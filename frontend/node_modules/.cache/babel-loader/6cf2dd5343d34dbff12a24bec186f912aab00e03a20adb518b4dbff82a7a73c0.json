{"ast":null,"code":"import React,{useState,useEffect}from'react';import{settingsApi}from'../services/api';import useNotificationDialog from'../hooks/useNotificationDialog';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Settings=()=>{const[settings,setSettings]=useState({autoCleanup:true,cleanupDelay:72});const[loginPrefixConfig,setLoginPrefixConfig]=useState({login_prefix:'',export_format:'OVHcloud Login'});const[isLoading,setIsLoading]=useState(false);// Notification dialog\nconst{NotificationDialog,showNotification}=useNotificationDialog();// Load settings from localStorage and API on mount\nuseEffect(()=>{const loadSettings=async()=>{// Load local settings\nconst savedSettings=localStorage.getItem('techlabs-settings');if(savedSettings){try{const parsedSettings=JSON.parse(savedSettings);setSettings(parsedSettings);}catch(error){console.error('Failed to parse saved settings:',error);}}// Load login prefix config from API\ntry{const prefixConfig=await settingsApi.getLoginPrefixConfig();setLoginPrefixConfig(prefixConfig);}catch(error){console.error('Failed to load login prefix config:',error);}};loadSettings();},[]);const handleSettingChange=(key,value)=>{setSettings(prev=>({...prev,[key]:value}));};const handleLoginPrefixChange=(key,value)=>{setLoginPrefixConfig(prev=>({...prev,[key]:value}));};const handleSave=async()=>{setIsLoading(true);try{// Save local settings to localStorage\nlocalStorage.setItem('techlabs-settings',JSON.stringify(settings));// Save login prefix config to API\nawait settingsApi.setLoginPrefixConfig(loginPrefixConfig);// Show success confirmation\nshowNotification({title:'Settings Saved',message:'Settings saved successfully!',type:'success'});}catch(error){console.error('Failed to save settings:',error);showNotification({title:'Save Failed',message:'Failed to save settings: '+(error instanceof Error?error.message:'Unknown error'),type:'error'});}finally{setIsLoading(false);}};const renderGeneralSettings=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4\",children:\"User Credentials\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login-prefix\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Login Prefix\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login-prefix\",type:\"text\",value:loginPrefixConfig.login_prefix,onChange:e=>handleLoginPrefixChange('login_prefix',e.target.value),className:\"block w-full max-w-sm rounded-md border-gray-300 dark:bg-slate-700 dark:border-slate-600 dark:text-gray-100 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",placeholder:\"e.g., 0541-8821-89/\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400 mt-1\",children:[\"Prefix applied to all attendee usernames in credential exports. Must end with '/' if not empty.\",loginPrefixConfig.login_prefix&&/*#__PURE__*/_jsxs(\"span\",{className:\"block mt-1 text-primary-600 dark:text-primary-400\",children:[\"Preview: \",loginPrefixConfig.login_prefix,\"username\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"export-format\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Export Format Label\"}),/*#__PURE__*/_jsx(\"input\",{id:\"export-format\",type:\"text\",value:loginPrefixConfig.export_format,onChange:e=>handleLoginPrefixChange('export_format',e.target.value),className:\"block w-full max-w-sm rounded-md border-gray-300 dark:bg-slate-700 dark:border-slate-600 dark:text-gray-100 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",placeholder:\"OVHcloud Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400 mt-1\",children:\"Label used in attendee credential exports\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4\",children:\"Workshop Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Auto-cleanup workshops\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Automatically delete workshop resources after completion\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.autoCleanup,onChange:e=>handleSettingChange('autoCleanup',e.target.checked),className:\"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cleanup-delay\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Cleanup delay (hours)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"cleanup-delay\",type:\"number\",min:\"1\",max:\"168\",value:settings.cleanupDelay,onChange:e=>handleSettingChange('cleanupDelay',parseInt(e.target.value)),className:\"block w-20 rounded-md border-gray-300 dark:bg-slate-700 dark:border-slate-600 dark:text-gray-100 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400 mt-1\",children:\"Time to wait after workshop end before cleanup\"})]})]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 dark:text-gray-300\",children:\"Configure application settings and preferences\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-slate-800 shadow dark:shadow-none rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-6\",children:renderGeneralSettings()}),/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 bg-gray-50 dark:bg-slate-700 border-t border-gray-200 dark:border-slate-600 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:isLoading,className:\"btn-primary\",children:isLoading?'Saving...':'Save Settings'})})]}),/*#__PURE__*/_jsx(NotificationDialog,{})]});};export default Settings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}